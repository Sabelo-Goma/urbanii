<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Urbanii ─ Live Urban Intelligence Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="styles.css" />
  <script src="script.js" defer></script>
</head>

<body>
  <div class="app-shell">

    <!-- ================= TOP BAR ================= -->
    <header class="top-bar">
      <div class="brand">
        <div class="brand-mark">U</div>
        <div class="brand-text">
          <span class="brand-name">Urbanii</span>
          <span class="brand-tagline">Edge AI • Urban Intelligence</span>
        </div>
      </div>

      <div class="top-status">
        <span id="status-badge" class="status-badge status-badge--disconnected">
          ● Disconnected
        </span>

        <span id="detections-label" class="metric-pill">Detections: —</span>
        <span id="classes-label" class="metric-pill">Classes: —</span>

        <div class="scene-select">
          <label for="sceneSelect">Select live video feed</label>
          <select id="sceneSelect"></select>
        </div>
      </div>
    </header>

    <!-- ================= MAIN GRID ================= -->
    <main class="main-grid">

      <!-- ===== VIDEO PANEL ===== -->
      <section class="panel panel--video">
        <div class="panel-header">
          <div>
            <h2>Live Video Stream</h2>
            <p class="panel-subtitle">
              Real-time YOLO detections with scene-aware intelligence
            </p>
          </div>
          <div class="panel-actions">
            <span class="chip chip--green">YOLO</span>
            <span class="chip chip--blue">Prototype</span>
          </div>
        </div>

        <div class="video-wrapper">
          <div class="video-frame">
            <img id="video-feed" class="video-img" alt="Urbanii live stream" />

            <div class="video-overlay-corner">URBANII • LIVE</div>

            <div id="video-error" class="video-error hidden">
              Stream unavailable
              <span class="video-error-sub">Waiting for inference node…</span>
            </div>
          </div>

          <!-- ================= CROWD METER ================= -->
          <div id="crowd-meter" class="crowd-meter">
            <div class="crowd-label">
              <span>Crowd Density</span>
              <span id="crowd-level" class="crowd-level">—</span>
            </div>

            <div class="crowd-bar">
              <div id="crowd-bar-fill" class="crowd-bar-fill"></div>
            </div>

            <div id="crowd-trend" class="crowd-trend">—</div>
          </div>
          <!-- ================= /CROWD METER ================= -->

          <!-- ================= TRAFFIC METER ================= -->
          <div id="traffic-meter" class="traffic-meter hidden">
            <div class="traffic-label">
              <span>Traffic Density</span>
              <span id="traffic-level" class="traffic-level">—</span>
            </div>

            <div class="traffic-bar">
              <div id="traffic-bar-fill" class="traffic-bar-fill"></div>
            </div>

            <div id="traffic-trend" class="traffic-trend">—</div>
          </div>
          <!-- ================= /TRAFFIC METER ================= -->

        </div>
      </section>

      <!-- ===== EVENTS PANEL ===== -->
      <section class="panel panel--events">
        <div class="panel-header">
          <div>
            <h2>Recent Detection Events</h2>
            <p class="panel-subtitle">Latest inference metadata</p>
          </div>
          <button id="reset-summary" class="control-button">
            reset summary
          </button>
        </div>
        <!-- ===== INDUSTRIAL ALERT ===== -->
        <div id="industrial-alert" class="intel-alert intel-alert--amber intel-alert--hidden">
          <div class="intel-alert-header">
            ⚠️ Site Safety Advisory
          </div>
          <div class="intel-alert-body">
            <span id="industrial-details">
              Heavy machinery/ Potential PPE/ Proximity risk detected.
            </span>
          </div>
        </div> 
        <!-- ===== LOITERING ALERT ===== -->
        <div id="loitering-alert" class="intel-alert intel-alert--hidden">
          <div class="intel-alert-header">
            ⚠️ Potential Loitering Detected
          </div>
          <div class="intel-alert-body">
            <span id="loitering-details">
              Individual(s) stationary beyond threshold.
            </span>
          </div>
        </div>
        <!-- ===== /LOITERING ALERT ===== -->

        <div class="events-table-wrapper">
          <table class="events-table">
            <thead>
              <tr>
                <th>Time</th>
                <th>Objects</th>
                <th>Classes</th>
              </tr>
            </thead>
            <tbody id="events-body"></tbody>
          </table>
        </div>
      </section>

    </main>

    <!-- ================= FOOTER ================= -->
    <footer class="footer">
      <span>
        © <span id="year"></span> Quarisme AI • Urbanii Prototype Node
      </span>
      <span class="footer-right">
        Backend: <code>FastAPI</code> • Model: <code>YOLO</code>
      </span>
    </footer>

  </div>
</body>
</html>
